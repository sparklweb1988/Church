{% extends 'base.html' %}
{% block content %}
<div class="container mt-4">
    <h2>Returns Summary</h2><br>

    <!-- Date Filter Form -->
    <p>Filter Data by Dates</p>
    <form method="get" action="" class="d-inline-block mb-3">
        <input type="date" name="from_date" value="{{ from_date }}" class="form-control d-inline-block" style="width: 150px; height: 35px;">
        <input type="date" name="to_date" value="{{ to_date }}" class="form-control d-inline-block" style="width: 150px; height: 35px;">
        <input type="submit" value="Go" class="btn btn-primary ms-2" style="height: 35px;">
        <a href="{% url 'transaction_percentages' %}" class="btn btn-secondary ms-2" style="height: 35px;">Reset</a>
    </form>

    {% if summary %}
    <!-- Desktop Table View -->
    <div class="desktop-view mt-3">
        <table class="table table-bordered">
            <thead class="table-dark">
                <tr>
                    <th>Item Name</th>
                    <th>Actual Amount (100%)</th>
                    <th>%</th>
                    <th>Total Value</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>General Tithe</td>
                    <td>&#8358; {{ actual_amounts.general_tithe }}</td>
                    <td>64%</td>
                    <td>&#8358; {{ summary.general_tithe }}</td>
                </tr>
                <tr>
                    <td>Minister Tithe</td>
                    <td>&#8358; {{ actual_amounts.minister_tithe }}</td>
                    <td>64%</td>
                    <td>&#8358; {{ summary.minister_tithe }}</td>
                </tr>
                <tr>
                    <td>Sunday School</td>
                    <td>&#8358; {{ actual_amounts.sunday_school }}</td>
                    <td>50%</td>
                    <td>&#8358; {{ summary.sunday_school }}</td>
                </tr>
                <tr>
                    <td>Thanksgiving</td>
                    <td>&#8358; {{ actual_amounts.thanksgiving }}</td>
                    <td>70%</td>
                    <td>&#8358; {{ summary.thanksgiving }}</td>
                </tr>
                <tr>
                    <td>CRM</td>
                    <td>&#8358; {{ actual_amounts.crm }}</td>
                    <td>50%</td>
                    <td>&#8358; {{ summary.crm }}</td>
                </tr>
                <tr>
                    <td>Children Offering</td>
                    <td>&#8358; {{ actual_amounts.children }}</td>
                    <td>35%</td>
                    <td>&#8358; {{ summary.children }}</td>
                </tr>
            </tbody>
            <tfoot>
                <tr>
                    <td colspan="3"><strong>Grand Total</strong></td>
                    <td><strong>&#8358; {{ summary.grand_total }}</strong></td>
                </tr>
            </tfoot>
        </table>
        <h5><a href="{% url 'export_returns_summary' %}">Download Report</a></h5>
    </div>

    <!-- Mobile Card View -->
    <div class="mobile-view mt-3">
        <div class="card mb-3 p-2">
            <h4>Returns Summary</h4>
            <p><strong>General Tithe (100%):</strong> &#8358; {{ actual_amounts.general_tithe }}</p>
            <p><strong>General Tithe (64%):</strong> &#8358; {{ summary.general_tithe }}</p>

            <p><strong>Minister Tithe (100%):</strong> &#8358; {{ actual_amounts.minister_tithe }}</p>
            <p><strong>Minister Tithe (64%):</strong> &#8358; {{ summary.minister_tithe }}</p>

            <p><strong>Sunday School (100%):</strong> &#8358; {{ actual_amounts.sunday_school }}</p>
            <p><strong>Sunday School (50%):</strong> &#8358; {{ summary.sunday_school }}</p>

            <p><strong>Thanksgiving (100%):</strong> &#8358; {{ actual_amounts.thanksgiving }}</p>
            <p><strong>Thanksgiving (70%):</strong> &#8358; {{ summary.thanksgiving }}</p>

            <p><strong>CRM (100%):</strong> &#8358; {{ actual_amounts.crm }}</p>
            <p><strong>CRM (50%):</strong> &#8358; {{ summary.crm }}</p>

            <p><strong>Children Offering (100%):</strong> &#8358; {{ actual_amounts.children }}</p>
            <p><strong>Children Offering (35%):</strong> &#8358; {{ summary.children }}</p>

            <p><strong>Grand Total:</strong> &#8358; {{ summary.grand_total }}</p>
            <h5><a href="{% url 'export_returns_summary' %}">Download Report</a></h5>
        </div>
    </div>
    {% else %}
    <p>No transactions found.</p>
    {% endif %}
</div>
{% endblock %}
